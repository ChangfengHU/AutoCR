# Neo4j 知识图谱同步功能使用指南

## 🎯 功能位置

现在您可以通过**三种方式**同步项目知识图谱到Neo4j：

### 1. 🖱️ 右键菜单（推荐）
- 在**项目文件树**中右键任意文件/文件夹
- 在**代码编辑器**中右键任意位置
- 选择"**同步到Neo4j**"
- 快捷键：`Ctrl+Alt+N`

### 2. 📊 状态面板按钮
- 打开右侧工具窗口："**AutoCR-Status**"
- 在"**概览**"标签页中，点击绿色的"🔄 **同步到Neo4j**"按钮
- 在"**Neo4j**"标签页中，点击橙色的"🚀 **立即同步**"按钮

### 3. 🔧 工具菜单
- 菜单栏：**Tools** → **同步到Neo4j**

## 🔄 同步流程

### 自动检查流程
1. **配置检查**: 自动检查Neo4j是否已配置
2. **索引检查**: 验证项目是否已完成索引
3. **确认对话框**: 显示详细的同步信息和项目统计

### 同步过程
1. **数据准备**: 获取项目的类、方法和关系数据
2. **连接数据库**: 连接到Neo4j数据库
3. **清空旧数据**: 清理数据库中的现有项目数据
4. **同步节点**: 同步所有类和方法节点
5. **同步关系**: 同步调用、继承、实现等关系
6. **验证结果**: 验证同步的数据完整性

## 🎨 界面特色

### 智能按钮状态
- **绿色森林色**：概览页面的同步按钮（🔄 同步到Neo4j）
- **橙色**：Neo4j专用页面的立即同步按钮（🚀 立即同步）
- **加粗字体**：重要操作按钮突出显示
- **图标标识**：直观的视觉提示

### 详细的反馈信息
- **实时进度条**：显示同步进度
- **统计信息**：显示节点数量、关系数量、耗时等
- **错误提示**：详细的错误信息和解决建议
- **成功指引**：提供Neo4j Browser访问地址和查询建议

## 📋 使用前提

### 必需条件
1. ✅ **项目已索引**：必须先完成项目的代码索引
2. ✅ **Neo4j已配置**：在设置中配置Neo4j连接信息
3. ✅ **Neo4j服务运行**：确保Neo4j数据库服务正在运行

### 配置步骤
1. **打开设置**：File → Settings → Tools → AutoCR
2. **配置Neo4j**：在"Neo4j 数据库"标签页中配置连接信息
3. **测试连接**：点击"测试连接"按钮验证配置
4. **启动索引**：如果项目未索引，先进行项目索引

## 🎯 使用场景

### 开发阶段
- **代码重构前**：了解代码结构和依赖关系
- **新人入职**：快速理解项目架构
- **架构评审**：可视化分析系统设计

### 维护阶段
- **影响分析**：分析代码变更的影响范围
- **依赖梳理**：清理和优化代码依赖
- **文档生成**：自动生成架构文档

## 💡 Pro Tips

### 最佳实践
1. **定期同步**：代码有重大变更后及时同步
2. **分支对比**：不同分支的知识图谱对比分析
3. **团队共享**：团队共用一个Neo4j实例
4. **查询模板**：保存常用的Cypher查询语句

### 推荐查询
```cypher
// 查看所有节点
MATCH (n) RETURN n LIMIT 25

// 查看调用关系最多的方法
MATCH (m:Method)
WITH m, size((m)<-[:CALLS]-()) as callCount
ORDER BY callCount DESC
RETURN m.methodName, callCount LIMIT 10

// 查看继承层次结构
MATCH (child:Class)-[:INHERITS]->(parent:Class)
RETURN child.className, parent.className

// 查看复杂度最高的方法
MATCH (m:Method)
WHERE m.cyclomaticComplexity > 10
RETURN m.methodName, m.cyclomaticComplexity
ORDER BY m.cyclomaticComplexity DESC
```

## 🚀 快速开始

1. **右键任意文件** → 选择"**同步到Neo4j**"
2. **确认同步** → 点击"是"开始同步
3. **等待完成** → 查看同步结果统计
4. **打开Neo4j Browser** → `http://localhost:7474`
5. **运行查询** → `MATCH (n) RETURN n LIMIT 25`

现在您就可以在Neo4j中可视化探索您的项目架构了！🎉